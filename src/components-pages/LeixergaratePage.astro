---
import { CompanyName } from '@/config/company';
import Page from '@/layouts/Page.astro';

import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import PageHeader from '@/components/PageHeader.astro';
import LeixegarateImage from '@/assets/images/leixagarate-aterpea.webp';
import HeroImage from '@/components/HeroImage.astro';
import ImageGallery from '@/components/ImageGallery.astro';
import { getEntry } from 'astro:content';
import type { ImageMetadata } from 'astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const entry = await getEntry('leixergarateAterpea', 'leixergarate-aterpea');

const images = import.meta.glob<{ default: ImageMetadata }>(
	'/src/assets/images/leixegarate-aterpea/*.webp'
);

if (!entry) {
	throw new Error(`Content not found for leixergarateAterpea content ${lang}`);
}
---

<Page
	seo={{
		title: t('nav.leixagarate-aterpea') + ' - ' + CompanyName,
		description: t('leixagarate-aterpea.seo.description')
	}}
	pageClass="content__container"
>
	<PageHeader title={t('nav.leixagarate-aterpea')} />

	<HeroImage
		src={LeixegarateImage}
		alt={t('nav.leixagarate-aterpea')}
		slug="leixagarate-aterpea"
	/>
	<section>
		<h2 class="h4">{t('Deskribapena')}</h2>
		<p>
			{lang === 'eu' ? entry.data.descriptionEu : entry.data.descriptionEs}
		</p>
	</section>
	<section>
		<h2 class="h4">{t('Besaidek egindako ekarpena')}</h2>
		<p>
			{lang === 'eu' ? entry.data.contributionEu : entry.data.contributionEs}
		</p>
	</section>
	<section>
		<h2 class="h4">{t('Argazki galeria')}</h2>
		<ImageGallery images={images} alt={t('nav.leixagarate-aterpea')} />
	</section>

	<style>
		.leixagarate-image {
			width: 100%;
			height: auto;
			border-radius: var(--border-radius-lg);
			margin-top: var(--s4);
		}

		section:not(:last-of-type) {
			margin-bottom: var(--s6);
		}
	</style>
</Page>
