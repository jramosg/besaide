---
import SearchIcon from '@lucide/astro/icons/search';
interface Props {
	placeholder: string;
	ariaLabel: string;
	id?: string;
}

const { placeholder, ariaLabel, id = 'search-input' } = Astro.props;
---

<div class="search-wrapper">
	<SearchIcon class="search-icon" aria-hidden="true">
		<circle cx="11" cy="11" r="8"></circle>
		<path d="m21 21-4.3-4.3"></path>
	</SearchIcon>
	<input
		type="search"
		id={id}
		class="search-input"
		placeholder={placeholder}
		aria-label={ariaLabel}
		autocomplete="off"
	/>
</div>

<style>
	.search-wrapper {
		position: relative;
		width: 100%;
	}

	.search-icon {
		position: absolute;
		left: var(--s3);
		top: 50%;
		transform: translateY(-50%);
		color: var(--theme-input-placeholder);
		pointer-events: none;
		transition: color var(--theme-transition);
	}

	.search-input {
		width: 100%;
		height: 44px;
		padding: var(--s2) var(--s3) var(--s2) var(--s7);
		font-size: var(--font-size-base);
		font-family: var(--theme-font-family);
		color: var(--theme-on-bg);
		background-color: var(--theme-input-bg);
		border: 1px solid var(--theme-input-border);
		border-radius: var(--theme-shape-radius);
		transition:
			border-color var(--theme-transition),
			box-shadow var(--theme-transition),
			background-color var(--theme-transition);
	}

	.search-input::placeholder {
		color: var(--theme-input-placeholder);
	}

	.search-input:hover {
		border-color: var(--theme-input-border-hover);
	}

	.search-input:focus {
		outline: none;
		border-color: var(--theme-primary);
		box-shadow: 0 0 0 3px var(--theme-input-focus-ring);
		background-color: var(--theme-bg);
	}

	.search-input:focus + .search-icon,
	.search-input:not(:placeholder-shown) + .search-icon {
		color: var(--theme-primary);
	}

	/* Clear button for search inputs */
	.search-input::-webkit-search-cancel-button {
		-webkit-appearance: none;
		appearance: none;
		height: 16px;
		width: 16px;
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");
		background-size: 16px 16px;
		cursor: pointer;
	}

	.search-input::-webkit-search-cancel-button:hover {
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23b11cab' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");
	}
</style>
