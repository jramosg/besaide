---
const {
	href,
	unelevated,
	outlined,
	tonal,
	bordered,
	customIcon,
	onPrimary,
	newTab,
	class: className,
	...rest
} = Astro.props;

const Tag = href ? 'a' : 'button';
---

<Tag
	class:list={[
		'btn',
		'button-text',
		unelevated && 'btn--unelevated',
		outlined && 'btn--outlined',
		tonal && 'btn--tonal',
		bordered && 'btn--bordered',
		onPrimary && 'btn--on-primary',
		className
	]}
	href={href}
	target={`${newTab ? '_blank' : ``}`}
	rel={`${newTab ? 'noopener noreferrer' : ``}`}
	{...rest}
>
	<slot />
	{
		customIcon && (
			<span class="custom-icon__span">
				<slot name="icon">custom_icon</slot>
			</span>
		)
	}
</Tag>

<style>
	.btn {
		width: fit-content;
		padding: 0.75rem 1.5rem;
		margin-bottom: 0;
		border: 1px solid;
		border-color: var(--theme-primary-800);
		display: flex;
		align-items: center;
		justify-content: center;
		background-color: var(--theme-primary-800);
		color: var(--theme-on-primary);
		border-radius: 12px;
		font-weight: var(--font-weight-semibold);
		transition:
			background-color 300ms ease-in-out,
			border-color 300ms ease-in-out;
	}
	.btn:hover {
		background-color: var(--theme-primary-900);
		border-color: var(--theme-primary-900);
	}
	.btn--unelevated {
		background-color: transparent;
		color: var(--theme-on-bg);
	}
	.btn--unelevated:hover {
		background-color: transparent;
		opacity: var(--theme-primary-hover);
	}
	.btn--outlined {
		color: var(--theme-primary);
		background-color: transparent;
		border: 1px solid var(--theme-primary-900);
		transition: background-color 0.3s ease;
	}
	.btn--outlined:hover {
		background-color: var(--theme-primary-hover-bg);
	}
	.btn--tonal {
		background-color: var(--theme-card);
		border-color: var(--theme-card);
		color: var(--theme-primary-800);
		transition: opacity 0.3s ease;
	}
	.btn--tonal:hover {
		opacity: 0.72;
		background-color: var(--theme-card);
	}
	.btn--bordered {
		border: 1px solid white;
		background-color: transparent;
		&:hover {
			background-color: rgba(255, 255, 255, 0.1);
			border: 1px solid white;
		}
	}
	.custom-icon__span {
		margin-left: 0.25rem;
		display: flex;
		align-items: center;
	}

	.custom-icon__span :global(svg) {
		width: 24px;
		height: 24px;
	}

	a.btn {
		text-decoration: none;
	}
	button.btn {
		cursor: pointer;
		outline: none;
	}

	.loading {
		opacity: 0.8;
		cursor: not-allowed;
	}
	/* Loading spinner styles */
	:global(.spinner) {
		display: inline-block;
		width: 16px;
		height: 16px;
		border: 2px solid rgba(255, 255, 255, 0.3);
		border-radius: 50%;
		border-top-color: currentColor;
		animation: spin 1s ease-in-out infinite;
		margin-right: 8px;
		vertical-align: middle;
	}

	@keyframes spin {
		to {
			transform: rotate(360deg);
		}
	}
</style>
