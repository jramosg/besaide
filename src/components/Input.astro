---
interface Props {
	placeholder?: string;
	ariaLabel: string;
	id?: string;
	type?: 'text' | 'password' | 'email' | 'number' | 'search';
}

const {
	placeholder = '',
	ariaLabel,
	id = 'input-field',
	type = 'text'
} = Astro.props;
---

<div class="input-wrapper">
	<slot name="start-icon" />
	<input
		type={type}
		id={id}
		class="input-field"
		placeholder={placeholder}
		aria-label={ariaLabel}
		autocomplete="off"
	/>
</div>

<style>
	.input-wrapper {
		position: relative;
		width: 100%;
	}

	.input-field {
		width: 100%;
		height: 44px;
		padding: var(--s2) var(--s3);
		font-size: var(--font-size-base);
		font-family: var(--theme-font-family);
		color: var(--theme-on-bg);
		background-color: var(--theme-input-bg);
		border: 1px solid var(--theme-input-border);
		border-radius: var(--theme-shape-radius);
		transition:
			border-color var(--theme-transition),
			box-shadow var(--theme-transition),
			background-color var(--theme-transition);
	}

	.input-wrapper:has([slot='start-icon']) .input-field {
		padding-left: var(--s7);
	}

	.input-field:has() .input-field::placeholder {
		color: var(--theme-input-placeholder);
	}

	.input-field:hover {
		border-color: var(--theme-input-border-hover);
	}

	.input-field:focus {
		outline: none;
		border-color: var(--theme-primary);
		box-shadow: 0 0 0 3px var(--theme-input-focus-ring);
		background-color: var(--theme-bg);
	}

	/* Slot for start-icon */
	:global(.input-wrapper > [slot='start-icon']) {
		position: absolute;
		left: var(--s3);
		top: 50%;
		transform: translateY(-50%);
		color: var(--theme-input-placeholder);
		pointer-events: none;
		transition: color var(--theme-transition);
	}

	.input-field:focus + :global([slot='start-icon']),
	.input-field:not(:placeholder-shown) + :global([slot='start-icon']) {
		color: var(--theme-primary);
	}
</style>
