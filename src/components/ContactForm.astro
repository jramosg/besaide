---
import Input from '@/components/Input.astro';
import Textarea from '@/components/Textarea.astro';
import FormField from '@/components/FormField.astro';
import Button from '@/components/buttons/Button.astro';
import '@/styles/form-shared.css';
import Checkbox from './Checkbox.astro';
import { getLangFromUrl, getUrlFromID, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<form class="contact-form-fields" method="POST" novalidate>
	<FormField label="Izena" htmlFor="name" required>
		<Input
			id="name"
			name="name"
			type="text"
			required={true}
			autocomplete="name"
		/>
	</FormField>

	<FormField label="Emaila" htmlFor="email" required>
		<Input
			id="email"
			name="email"
			type="email"
			required={true}
			autocomplete="email"
		/>
	</FormField>

	<FormField label="Telefonoa" htmlFor="phone">
		<Input id="phone" name="phone" type="tel" autocomplete="tel" />
	</FormField>

	<FormField label="Gaia" htmlFor="subject" required>
		<select id="subject" name="subject" class="select-field" required>
			<option value="">Aukeratu gai bat...</option>
			<option value="bazkidetza">Bazkidetza</option>
			<option value="zerbitzuak">Zerbitzuak</option>
			<option value="ekintzak">Ekintzak</option>
			<option value="materiala">Material alokairua</option>
			<option value="aterpea">Aterpea</option>
			<option value="beste">Beste bat</option>
		</select>
	</FormField>

	<FormField label="Mezua" htmlFor="message" required>
		<Textarea
			id="message"
			name="message"
			rows={5}
			required={true}
			placeholder="Idatzi hemen zure mezua..."
		/>
	</FormField>
	<Checkbox
		id="terms"
		name="terms"
		label={t('Erabilera arauak onartzen ditut.')}
		hrefLabel={t('(Irakurri hemen)')}
		href={getUrlFromID('cookies-policy', lang)}
		required
	/>

	<Button class="submit-button" type="submit">Mezua bidali</Button>
</form>

<style>
	.contact-form-fields {
		display: flex;
		flex-direction: column;
		gap: var(--s4);
	}

	.form-field :global(input),
	.form-field :global(select),
	.form-field :global(textarea) {
		background: transparent;
		color: var(--theme-on-bg);
	}

	:global([data-theme='dark']) .form-field :global(input),
	:global([data-theme='dark']) .form-field :global(select),
	:global([data-theme='dark']) .form-field :global(textarea) {
		background-color: var(--theme-card);
	}

	.submit-button {
		margin-top: var(--s2);
		align-self: center;
		min-width: 200px;
	}

	@media (max-width: 600px) {
		.submit-button {
			width: 100%;
		}
	}
</style>
