---
import { Address, Socials } from '@/config/company';
import Logo from '@/components/Logo.astro';
import YoutubeIcon from '@/assets/icons/youtube.svg';
import XIcon from '@/assets/icons/x.svg';
import FacebookIcon from '@/assets/icons/facebook.svg';
import InstagramIcon from '@/assets/icons/instagram.png';
import { Image } from 'astro:assets';
import { getLangFromUrl, getUrlFromID } from '@/i18n/utils';

const url = Astro.url;
const lang = getLangFromUrl(url);
---

<footer class="footer">
	<div class="container">
		<div class="footer-content">
			<div class="footer-section">
				<div class="footer-logo">
					<Logo />
				</div>
				<div class="footer-contact">
					<a class="address-link" href={Address.url}>
						{Address.name}
					</a>
					<p>
						Tel: <a href="tel:+34943773066">+34 943 77 30 66</a><br />
						Email: <a href="mailto:besaide@besaide.eus">besaide@besaide.eus</a>
					</p>
				</div>
			</div>

			<nav class="footer-section" aria-label="Zerbitzuak">
				<h2>Zerbitzuak</h2>
				<ul class="footer-links">
					<li><a href="/">Materialen alokairua</a></li>
					<li><a href="/">Leixargarate Aterpea</a></li>
					<li><a href="/">Liburutegia eta mapak</a></li>
					<li><a href="/">Ikastaroak</a></li>
				</ul>
			</nav>

			<nav class="footer-section" aria-label="Elkartea">
				<h2>Elkartea</h2>
				<ul class="footer-links">
					<li><a href="/">Gure historia</a></li>
					<li><a href="/">Bazkidetza</a></li>
					<li><a href="/">Agenda</a></li>
					<li><a href={getUrlFromID('news', lang)}>Berriak</a></li>
				</ul>
			</nav>

			<div class="footer-section">
				<h2>Jarraitu gaitzazu</h2>
				<div class="social-media">
					<a
						href={Socials.facebook}
						target="_blank"
						class="social-link"
						aria-label="Besaide Facebook"
					>
						<FacebookIcon width={24} height={24} />
						Facebook
					</a>
					<a
						href="https://x.com/#/Besaideme"
						target="_blank"
						class="social-link"
						aria-label="Besaide X"
					>
						<XIcon width={24} height={24} /> X
					</a>
					<a
						href="https://www.youtube.com/channel/UChcnKpJIpY-U1NaiIw09nNg"
						target="_blank"
						class="social-link"
						aria-label="Besaide YouTube"
					>
						<YoutubeIcon width={24} height={24} /> YouTube
					</a>
					<a
						href={Socials.instagram}
						target="_blank"
						class="social-link"
						aria-label="Besaide Instagram"
					>
						<span class="social-icon">
							<Image
								src={InstagramIcon}
								alt="Instagram icon"
								width={24}
								height={24}
							/>
						</span>
						Instagram
					</a>
				</div>

				<div class="office-hours-footer">
					<h3>Jende aurreko arreta:</h3>
					<p>Astearte eta asteazkenetan<br />19:30-20:30</p>
				</div>
			</div>
		</div>

		<div class="footer-bottom">
			<div class="footer-bottom-content">
				<div class="copyright">
					<p>
						&copy; 2025 Besaide Mendizale Elkartea. Eskubide guztiak
						erreserbatuta.
					</p>
				</div>
				<div class="legal-links">
					<a href={getUrlFromID('cookies-policy', lang)}
						>Lege oharra / Pribatutasun politika</a
					>
				</div>
			</div>
		</div>
	</div>

	<!-- Cookie Notice -->
	<!-- <div
		class="cookie-notice"
		id="cookie-notice"
		data-visible="false"
		aria-hidden="true"
	>
		<div class="cookie-content">
			<p>
				Gure webguneak cookie propioak eta hirugarrenenak erabiltzen ditu
				nabigazioaren erabilgarritasuna hobetzeko eta informazioa biltzeko.
				Cookie-ak ez dira erabiliko informazio pertsonala biltzeko.
			</p>
			<div class="cookie-actions">
				<button class="btn btn-accept" id="cookie-accept"
					>Cookie-ak onartu</button
				>
				<button class="btn btn-reject" id="cookie-reject"
					>Cookie-ak ezezatu</button
				>
				<a href="/cookien-politika" class="cookie-policy-link"
					>Cookien politika</a
				>
			</div>
		</div>
	</div> -->
</footer>

<script>
	document.addEventListener('astro:page-load', () => {
		function acceptCookies() {
			localStorage.setItem('cookies-accepted', 'true');
			hideCookieNotice();
		}

		function rejectCookies() {
			localStorage.setItem('cookies-accepted', 'false');
			hideCookieNotice();
		}
		document
			.getElementById('cookie-accept')
			?.addEventListener('click', acceptCookies);
		document
			.getElementById('cookie-reject')
			?.addEventListener('click', rejectCookies);

		// Cookie management

		function hideCookieNotice() {
			const notice = document.getElementById('cookie-notice');
			if (notice) {
				notice.classList.remove('show');
				notice.setAttribute('aria-hidden', 'true');
				notice.dataset.visible = 'false';
			}
		}

		/* function showCookieNotice() {
			const notice = document.getElementById('cookie-notice');
			if (notice && notice.dataset.visible !== 'true') {
				notice.classList.add('show');
				notice.setAttribute('aria-hidden', 'false');
				notice.dataset.visible = 'true';
			}
		} */

		const cookiesAccepted = localStorage.getItem('cookies-accepted');
		if (cookiesAccepted !== 'true') {
			//showCookieNotice();
		}
	});
</script>

<style>
	.footer {
		background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
		color: white;
		padding: 3rem 0 0;
		position: relative;
		margin-top: var(--s6);
	}

	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 20px;
	}

	.footer-content {
		display: grid;
		grid-template-columns: 2fr 1fr 1fr 1.5fr;
		gap: 3rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	.footer-section h2 {
		font-size: 1.2rem;
		font-weight: 600;
		margin-bottom: 1.5rem;
		color: var(--theme-primary-300);
	}

	.footer-section h3 {
		font-size: 1rem;
		font-weight: 600;
		margin-bottom: 0.5rem;
		color: var(--theme-primary-300);
	}

	.footer-logo {
		height: fit-content;
		padding-bottom: var(--s5);
	}

	.footer-contact p {
		color: rgba(255, 255, 255, 0.8);
		line-height: 1.6;
		margin-bottom: 1rem;
	}

	.footer-contact a {
		color: var(--theme-primary-300);
		text-decoration: none;
		transition: color var(--theme-transition);
	}

	.footer-contact a.address-link {
		color: inherit;
		text-decoration: underline;
	}

	.footer-contact a:hover {
		color: white;
	}

	.footer-links {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.footer-links li {
		margin-bottom: 0.75rem;
	}

	.footer-links a {
		color: rgba(255, 255, 255, 0.8);
		text-decoration: none;
		transition: all var(--theme-transition);
		font-size: 0.95rem;
		display: inline-block;
	}

	.footer-links a:hover {
		color: var(--theme-primary-300);
		transform: translateX(0.5rem);
	}

	.social-media {
		display: grid;
		gap: 0.75rem;
		margin-bottom: 2rem;
	}

	.social-link {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		color: rgba(255, 255, 255, 0.8);
		text-decoration: none;
		transition: all 0.3s ease;
		font-size: 0.95rem;
	}

	.social-link:hover {
		color: var(--theme-primary-300);
		transform: translateX(0.5rem);
	}

	.office-hours-footer p {
		color: rgba(255, 255, 255, 0.8);
		font-size: 0.9rem;
		line-height: 1.4;
		margin: 0;
	}

	.footer-bottom {
		padding: var(--s6) var(--s4);
		background: rgba(0, 0, 0, 0.2);
		margin-top: 2rem;
	}

	.footer-bottom-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
		flex-wrap: wrap;
		gap: 1rem;
	}

	.copyright p {
		color: rgba(255, 255, 255, 0.6);
		font-size: 0.9rem;
		margin: 0;
	}

	.legal-links {
		display: flex;
		gap: 2rem;
	}

	.legal-links a {
		color: rgba(255, 255, 255, 0.6);
		text-decoration: none;
		font-size: 0.9rem;
		transition: color 0.3s ease;
	}

	.legal-links a:hover {
		color: var(--theme-primary-300);
	}

	/* Cookie Notice */
	.cookie-notice {
		position: fixed;
		bottom: -200px;
		left: 0;
		right: 0;
		background: #1f2937;
		color: white;
		padding: 1.5rem;
		box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
		z-index: 10000;
		border-top: 3px solid var(--theme-primary);
		pointer-events: none;
		visibility: hidden;
		opacity: 0;
		transition:
			bottom 0.5s ease,
			opacity 0.5s ease,
			visibility 0.5s ease;
	}

	.cookie-notice.show {
		height: fit-content;
		pointer-events: auto;
		visibility: visible;
		opacity: 1;
		bottom: 0;
	}

	.cookie-content {
		max-width: 1200px;
		margin: 0 auto;
		display: flex;
		justify-content: space-between;
		align-items: center;
		gap: 2rem;
		flex-wrap: wrap;
	}

	.cookie-content p {
		flex: 1;
		margin: 0;
		font-size: 0.9rem;
		line-height: 1.5;
		color: rgba(255, 255, 255, 0.9);
	}

	.cookie-actions {
		display: flex;
		gap: 1rem;
		align-items: center;
		flex-wrap: wrap;
	}

	.btn {
		padding: 0.5rem 1rem;
		border: none;
		border-radius: 4px;
		font-weight: 500;
		font-size: 0.9rem;
		cursor: pointer;
		transition: all 0.3s ease;
		text-decoration: none;
		display: inline-block;
	}

	.btn-accept {
		background: var(--theme-primary);
		color: white;
	}

	.btn-accept:hover {
		background: var(--theme-primary-600);
	}

	.btn-reject {
		background: transparent;
		color: rgba(255, 255, 255, 0.8);
		border: 1px solid rgba(255, 255, 255, 0.3);
	}

	.btn-reject:hover {
		background: rgba(255, 255, 255, 0.1);
		color: white;
	}

	.cookie-policy-link {
		color: var(--theme-primary-300);
		text-decoration: none;
		font-size: 0.85rem;
		transition: color var(--theme-transition);
	}

	.cookie-policy-link:hover {
		color: white;
	}

	/* Mobile Styles */
	@media (max-width: 768px) {
		.footer-content {
			grid-template-columns: 1fr;
			gap: 2rem;
		}

		.footer-bottom-content {
			flex-direction: column;
			text-align: center;
		}

		.legal-links {
			flex-direction: column;
			gap: 0.5rem;
		}

		.cookie-content {
			flex-direction: column;
			align-items: stretch;
			text-align: center;
		}

		.cookie-actions {
			justify-content: center;
		}
	}

	@media (max-width: 480px) {
		.footer {
			padding: 2rem 0 0;
		}

		.footer-content {
			gap: 1.5rem;
		}

		.social-media {
			gap: 0.5rem;
		}

		.cookie-notice {
			padding: 1rem;
		}

		.cookie-actions {
			flex-direction: column;
			gap: 0.75rem;
		}

		.btn {
			width: 100%;
			max-width: 200px;
		}
	}
</style>
